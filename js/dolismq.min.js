window.dolismq||(window.dolismq={},window.dolismq.scriptsLoaded=!1),window.dolismq.scriptsLoaded||(window.dolismq.init=function(){window.dolismq.load_list_script()},window.dolismq.load_list_script=function(){if(!window.dolismq.scriptsLoaded){var o=void 0,t=void 0;for(o in window.dolismq)for(t in window.dolismq[o].init&&window.dolismq[o].init(),window.dolismq[o])window.dolismq[o]&&window.dolismq[o][t]&&window.dolismq[o][t].init&&window.dolismq[o][t].init();window.dolismq.scriptsLoaded=!0}},window.dolismq.refresh=function(){var o=void 0,t=void 0;for(o in window.dolismq)for(t in window.dolismq[o].refresh&&window.dolismq[o].refresh(),window.dolismq[o])window.dolismq[o]&&window.dolismq[o][t]&&window.dolismq[o][t].refresh&&window.dolismq[o][t].refresh()},$(document).ready(window.dolismq.init)),window.dolismq.control={},window.dolismq.control.init=function(){window.dolismq.control.event()},window.dolismq.control.event=function(){$(document).on("click",".answer:not(.disable)",window.dolismq.control.selectAnswer),$(document).on("input",".input-answer:not(.disable)",window.dolismq.control.selectAnswer),$(document).on("keyup",".question-comment",window.dolismq.control.writeComment),$(document).on("keyup",".question-comment",window.dolismq.control.showCommentUnsaved),$(document).on("change","#fk_product",window.dolismq.control.reloadProductLot),$(document).on("change","#fk_project",window.dolismq.control.reloadTask),$(document).on("change","#fk_soc",window.dolismq.control.reloadContact),$(document).on("click",".validateButton",window.dolismq.control.getAnswerCounter),$(document).on("change","#fk_sheet",window.dolismq.control.showSelectObjectLinked),$(document).on("click",".toggleControlInfo",window.dolismq.control.toggleControlInfo),$(document).on("click",".control.media-gallery-favorite, .control.media-gallery-unlink",window.dolismq.control.refreshFavoritePhoto)},window.dolismq.control.selectAnswer=function(o){var t=$(this).hasClass("answer")?$(this).attr("value"):$(this).val();let e="";if($(this).closest(".table-cell").hasClass("select-answer")){if($(this).hasClass("multiple-answers")){$(this).closest("span").toggleClass("active");let o=[];$(".multiple-answers.active").each(function(){o.push($(this).attr("value"))}),e=o}else $(this).closest(".table-cell").find(".answer.active").css("background-color","#fff"),$(this).closest(".table-cell").find("span").removeClass("active"),$(this).closest("span").addClass("active"),e=t;$(this).hasClass("active")?(t=$(this).closest(".answer-cell").find(".answer-color-"+$(this).attr("value")).val(),$(this).attr("style",$(this).attr("style")+" background:"+t+";")):$(this).attr("style",$(this).attr("style")+" background:#fff;"),$(this).closest(".answer-cell").find(".question-answer").val(e)}window.dolismq.control.updateButtonsStatus()},window.dolismq.control.writeComment=function(o){var t=$(this).closest(".table-cell").find(".question-comment").attr("name"),e=$(this).closest(".table-cell").find(".question-comment").val();let n=$(this).closest(".tabBar").find(".validateButton").attr("href");n.match("&"+t+"=")&&(n=n.split("&"+t+"=")[0]),$(this).closest(".tabBar").find(".validateButton").attr("href",n+"&"+t+"="+e)},window.dolismq.control.showCommentUnsaved=function(o){$(this).hasClass("show-comment-unsaved-message")||($(this).after('<p style="color:red">Commentaire non enregistr√©</p>'),$(this).addClass("show-comment-unsaved-message")),window.dolismq.control.updateButtonsStatus()},window.dolismq.control.updateButtonsStatus=function(){$("#saveButton").removeClass("butActionRefused"),$("#saveButton").addClass("butAction"),$("#saveButton").attr("onclick",'$("#saveControl").submit()'),$("#validateButton").removeClass("butAction"),$("#validateButton").addClass("butActionRefused")},window.dolismq.control.reloadProductLot=function(o){var t=$(".id-container").find('input[name="token"]').val(),e=document.getElementById("createControlForm"),e=new FormData(e),n=e.get("fk_sheet"),e=e.get("fk_product"),t=document.URL+(document.URL.match(/\?action=create/)?"":"?action=create")+"&token="+t+"&fk_sheet="+n+"&fk_product="+e;$.ajax({url:t,type:"POST",processData:!1,contentType:!1,success:function(o){$(".lot-container").html($(o).find(".lot-content"))},error:function(){}})},window.dolismq.control.reloadTask=function(o){var t=document.getElementById("createControlForm"),t=new FormData(t),e=t.get("fk_sheet"),t=t.get("fk_project"),n=$(".id-container").find('input[name="token"]').val(),n=document.URL+(document.URL.match(/\?action=create/)?"":"?action=create")+"&token="+n+"&fk_sheet="+e+"&fk_project="+t;$.ajax({url:n,type:"POST",processData:!1,contentType:!1,success:function(o){$(".task-container").html($(o).find(".task-content"))},error:function(){}})},window.dolismq.control.reloadContact=function(o){var t=document.getElementById("createControlForm"),t=new FormData(t),e=t.get("fk_soc"),t=t.get("fk_sheet"),n=$(".id-container").find('input[name="token"]').val(),n=document.URL+(document.URL.match(/\?action=create/)?"":"?action=create")+"&token="+n+"&fk_sheet="+t+"&fk_soc="+e;$.ajax({url:n,type:"POST",processData:!1,contentType:!1,success:function(o){$("#fk_contact").html($(o).find("#fk_contact").children())},error:function(){}})},window.dolismq.control.getAnswerCounter=function(o){let t=0;jQuery("#tablelines").children().each(function(){0<$(this).find(".answer.active").length&&(t+=1)}),document.cookie="answerCounter="+t},window.dolismq.control.showSelectObjectLinked=function(o){var t=document.getElementById("createControlForm"),t=new FormData(t),e=$(".id-container").find('input[name="token"]').val(),n=t.get("fk_sheet"),i=t.get("fk_user_controller"),t=t.get("fk_project"),n=(n=document.URL+(document.URL.match(/\?action=create/)?"":"?action=create")+"&fk_sheet="+n+"&token="+e)+("&fk_project="+t)+("&fk_user_controller="+i);window.saturne.loader.display($(".tabBar.tabBarWithBottom tbody")),$.ajax({url:n,type:"POST",processData:!1,contentType:!1,success:function(o){$(".tabBar.tabBarWithBottom tbody").html($(o).find(".tabBar.tabBarWithBottom tbody").children()),$(".wpeo-loader").removeClass("wpeo-loader")},error:function(){}})},window.dolismq.control.toggleControlInfo=function(o){$(this).hasClass("fa-minus-square")?($(this).removeClass("fa-minus-square").addClass("fa-caret-square-down"),$(this).closest(".fiche").find(".fichecenter.controlInfo").addClass("hidden")):($(this).removeClass("fa-caret-square-down").addClass("fa-minus-square"),$(this).closest(".fiche").find(".fichecenter.controlInfo").removeClass("hidden"))},window.dolismq.control.refreshFavoritePhoto=function(){var o=$(this).closest(".media-gallery-favorite").find(".filename").attr("value"),t=window.saturne.toolbox.getToken();let e=$(this).closest(".tabBar").find(".arearef"),n=$(this).closest(".linked-medias-list");jQuery.ajax({url:document.URL+"&action=add_favorite_photo&token="+t,type:"POST",data:JSON.stringify({filename:o}),processData:!1,success:function(o){e.replaceWith($(o).find(".arearef")),n.replaceWith($(o).find(".linked-medias-list"))},error:function(){}})},window.dolismq.question={},window.dolismq.question.init=function(){window.dolismq.question.event()},window.dolismq.question.event=function(){$(document).on("click",".clicked-photo-preview",window.dolismq.question.previewPhoto),$(document).on("click",".ui-dialog-titlebar-close",window.dolismq.question.closePreviewPhoto),$(document).on("click","#show_photo",window.dolismq.question.showPhoto),$(document).on("click",".answer-picto .item, .wpeo-table .item",window.dolismq.question.selectAnswerPicto)},window.dolismq.question.previewPhoto=function(o){$(this).hasClass("photo-ok")?$("#dialogforpopup").attr("style","border: 10px solid #47e58e"):$(this).hasClass("photo-ko")&&$("#dialogforpopup").attr("style","border: 10px solid #e05353")},window.dolismq.question.closePreviewPhoto=function(o){$("#dialogforpopup").attr("style","border:")},window.dolismq.question.showPhoto=function(){var o=$(this).closest(".question-table").find(".linked-medias");o.hasClass("hidden")?(o.attr("style",""),o.removeClass("hidden")):(o.attr("style","display:none"),o.addClass("hidden"))},window.dolismq.question.selectAnswerPicto=function(o){var t=$(this).closest(".wpeo-dropdown");$(this).closest(".content").removeClass("active"),t.find(".dropdown-toggle span").hide(),t.find(".dropdown-toggle.button-picto").html($(this).closest(".wpeo-tooltip-event").html()),t.find(".input-hidden-picto").val($(this).data("id"))},window.dolismq.sheet={},window.dolismq.sheet.init=function(){window.dolismq.sheet.event()},window.dolismq.sheet.event=function(){};